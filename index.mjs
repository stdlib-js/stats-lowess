// Copyright (c) 2022 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import e from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-number-array@esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-typed-array-like@esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/stats-base-range@esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/string-format@esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-floor@esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-abs@esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-max@esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-min@esm/index.mjs";import m from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-pow@esm/index.mjs";import d from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-sqrt@esm/index.mjs";import p from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-plain-object@esm/index.mjs";import f from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-positive-number@esm/index.mjs";import h from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nonnegative-integer@esm/index.mjs";import j from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nonnegative-number@esm/index.mjs";import v from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-boolean@esm/index.mjs";var b=d,u=n,g=o,c=m;var w=function(e,s,t,r,i,n,o,a,m){var d,p,l,f,h,j,v,w,y,x,E,T;for(h=e[r],d=e[t-1]-e[0],f=.999*(v=g(h-e[i],e[n]-h)),l=.001*v,w=0,T=i;T<t;T++)if(o[T]=0,(E=u(e[T]-h))<=f)o[T]=E>l?c(1-c(E/v,3),3):1,a&&(o[T]*=m[T]),w+=o[T];else if(e[T]>h)break;if(p=T-1,w<=0)return s[r];for(T=i;T<=p;T++)o[T]/=w;if(v>0){for(w=0,T=i;T<=p;T++)w+=o[T]*e[T];for(y=h-w,x=0,T=i;T<=p;T++)x+=o[T]*c(e[T]-w,2);if(b(x)>.001*d)for(y/=x,T=i;T<=p;T++)o[T]*=1+y*(e[T]-w)}for(j=0,T=i;T<=p;T++)j+=o[T]*s[T];return j},y=i,x=n,E=o,T=a,A=m,O=w;function k(e,s){return e-s}var P=function(e,s,t,r,i,n){var o,a,m,d,p,l,f,h,j,v,b,u,g,c,w,P,V,F,q;if(t<2)return s;for(P=new Array(t),j=new Array(t),w=new Array(t),u=E(T(y(r*t),t),2),l=1;l<=i+1;l++){m=0,o=u-1,f=-1,V=0;do{for(;o<t-1&&!(e[V]-e[m]<=e[o+1]-e[V]);)m+=1,o+=1;if(P[V]=O(e,s,t,V,m,o,j,l>1,w),f<V-1)for(a=e[V]-e[f],F=f+1;F<V;F++)d=(e[F]-e[f])/a,P[F]=d*P[V]+(1-d)*P[f];for(h=e[f=V]+n,V=f+1;V<t&&!(e[V]>h);V++)e[V]===e[f]&&(P[V]=P[f],f=V);V=E(f+1,V-1)}while(f<t-1);for(V=0;V<t;V++)j[V]=s[V]-P[V];if(l>i)break;for(V=0;V<t;V++)w[V]=x(j[V]);for(w.sort(k),b=t-(v=y(t/2))-1,c=.999*(p=3*(w[v]+w[b])),g=.001*p,V=0;V<t;V++)q=x(j[V]),w[V]=q<=g?1:q>c?0:A(1-A(q/p,2),2)}return{x:e,y:P}},V=p,F=l,q=f,S=h.isPrimitive,z=j.isPrimitive,B=v.isPrimitive,C=r;var D=function(e,s){return F(s)?V(s,"f")&&(e.f=s.f,!q(e.f))?new TypeError(C("invalid option. `%s` option must be a positive number. Option: `%s`.","f",e.f)):V(s,"nsteps")&&(e.nsteps=s.nsteps,!S(e.nsteps))?new TypeError(C("invalid option. `%s` option must be a nonnegative integer. Option: `%s`.","nsteps",e.nsteps)):V(s,"delta")&&(e.delta=s.delta,!z(e.delta))?new TypeError(C("invalid option. `%s` option must be a nonnegative number. Option: `%s`.","delta",e.delta)):V(s,"sorted")&&(e.sorted=s.sorted,!B(e.sorted))?new TypeError(C("invalid option. `%s` option must be a boolean. Option: `%s`.","sorted",e.sorted)):null:new TypeError(C("invalid argument. Options argument must be an object. Value: `%s`.",s))},G=e.primitives,H=s,I=t,J=r,K=P,L=D;function M(e,s){return e[0]-s[0]}var N=function(e,s,t){var r,i,n,o,a,m,d,p;if(!H(e)&&!G(e))throw new TypeError(J("invalid argument. First argument must be a numeric array. Value: `%s`.",e));if(!H(s)&&!G(s))throw new TypeError(J("invalid argument. Second argument must be a numeric array. Value: `%s`.",s));if(p=e.length,s.length!==p)throw new Error("invalid arguments. First and second arguments must have the same length.");if(n={},arguments.length>2&&(o=L(n,t)))throw o;if(!0!==n.sorted){for(a=new Array(p),d=0;d<p;d++)a[d]=[e[d],s[d]];for(a.sort(M),e=new Array(p),s=new Array(p),d=0;d<p;d++)e[d]=a[d][0],s[d]=a[d][1]}return r=void 0===n.nsteps?3:n.nsteps,m=void 0===n.f?2/3:n.f,i=void 0===n.delta?.01*I(p,e,1):n.delta,K(e,s,p,m,r,i)};export{N as default};
//# sourceMappingURL=index.mjs.map
