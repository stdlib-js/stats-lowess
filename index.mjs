// Copyright (c) 2024 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import{primitives as e}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-number-array@v0.1.0-esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-typed-array-like@v0.1.0-esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/stats-base-range@v0.2.0-esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/string-format@v0.1.1-esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-floor@v0.2.0-esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-abs@v0.1.1-esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-max@v0.2.0-esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-min@v0.2.0-esm/index.mjs";import m from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-pow@v0.1.0-esm/index.mjs";import d from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-sqrt@v0.2.0-esm/index.mjs";import p from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@v0.2.0-esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-plain-object@v0.2.0-esm/index.mjs";import f from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-positive-number@v0.2.0-esm/index.mjs";import{isPrimitive as v}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nonnegative-integer@v0.1.0-esm/index.mjs";import{isPrimitive as h}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nonnegative-number@v0.2.0-esm/index.mjs";import{isPrimitive as j}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-boolean@v0.2.0-esm/index.mjs";function b(e,s,t,r,n,a,p,l,f){var v,h,j,b,u,g,c,w,y,x,E,T;for(u=e[r],v=e[t-1]-e[0],b=.999*(c=o(u-e[n],e[a]-u)),j=.001*c,w=0,T=n;T<t;T++)if(p[T]=0,(E=i(e[T]-u))<=b)p[T]=E>j?m(1-m(E/c,3),3):1,l&&(p[T]*=f[T]),w+=p[T];else if(e[T]>u)break;if(h=T-1,w<=0)return s[r];for(T=n;T<=h;T++)p[T]/=w;if(c>0){for(w=0,T=n;T<=h;T++)w+=p[T]*e[T];for(y=u-w,x=0,T=n;T<=h;T++)x+=p[T]*m(e[T]-w,2);if(d(x)>.001*v)for(y/=x,T=n;T<=h;T++)p[T]*=1+y*(e[T]-w)}for(g=0,T=n;T<=h;T++)g+=p[T]*s[T];return g}function u(e,s){return e-s}function g(e,s,t,r,d,p){var l,f,v,h,j,g,c,w,y,x,E,T,A,O,k,V,F,P,q;if(t<2)return s;for(V=new Array(t),y=new Array(t),k=new Array(t),T=o(a(n(r*t),t),2),g=1;g<=d+1;g++){v=0,l=T-1,c=-1,F=0;do{for(;l<t-1&&!(e[F]-e[v]<=e[l+1]-e[F]);)v+=1,l+=1;if(V[F]=b(e,s,t,F,v,l,y,g>1,k),c<F-1)for(f=e[F]-e[c],P=c+1;P<F;P++)h=(e[P]-e[c])/f,V[P]=h*V[F]+(1-h)*V[c];for(w=e[c=F]+p,F=c+1;F<t&&!(e[F]>w);F++)e[F]===e[c]&&(V[F]=V[c],c=F);F=o(c+1,F-1)}while(c<t-1);for(F=0;F<t;F++)y[F]=s[F]-V[F];if(g>d)break;for(F=0;F<t;F++)k[F]=i(y[F]);for(k.sort(u),E=t-(x=n(t/2))-1,O=.999*(j=3*(k[x]+k[E])),A=.001*j,F=0;F<t;F++)q=i(y[F]),k[F]=q<=A?1:q>O?0:m(1-m(q/j,2),2)}return{x:e,y:V}}function c(e,s){return l(s)?p(s,"f")&&(e.f=s.f,!f(e.f))?new TypeError(r("invalid option. `%s` option must be a positive number. Option: `%s`.","f",e.f)):p(s,"nsteps")&&(e.nsteps=s.nsteps,!v(e.nsteps))?new TypeError(r("invalid option. `%s` option must be a nonnegative integer. Option: `%s`.","nsteps",e.nsteps)):p(s,"delta")&&(e.delta=s.delta,!h(e.delta))?new TypeError(r("invalid option. `%s` option must be a nonnegative number. Option: `%s`.","delta",e.delta)):p(s,"sorted")&&(e.sorted=s.sorted,!j(e.sorted))?new TypeError(r("invalid option. `%s` option must be a boolean. Option: `%s`.","sorted",e.sorted)):null:new TypeError(r("invalid argument. Options argument must be an object. Value: `%s`.",s))}function w(e,s){return e[0]-s[0]}function y(n,i,o){var a,m,d,p,l,f;if(!s(n)&&!e(n))throw new TypeError(r("invalid argument. First argument must be a numeric array. Value: `%s`.",n));if(!s(i)&&!e(i))throw new TypeError(r("invalid argument. Second argument must be a numeric array. Value: `%s`.",i));if(f=n.length,i.length!==f)throw new RangeError("invalid arguments. First and second arguments must have the same length.");if(m={},arguments.length>2&&(d=c(m,o)))throw d;if(!0!==m.sorted){for(p=new Array(f),l=0;l<f;l++)p[l]=[n[l],i[l]];for(p.sort(w),n=new Array(f),i=new Array(f),l=0;l<f;l++)n[l]=p[l][0],i[l]=p[l][1]}return a=void 0===m.nsteps?3:m.nsteps,g(n,i,f,void 0===m.f?2/3:m.f,a,void 0===m.delta?.01*t(f,n,1):m.delta)}export{y as default};
//# sourceMappingURL=index.mjs.map
