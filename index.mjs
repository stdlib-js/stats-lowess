// Copyright (c) 2023 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import{primitives as s}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-number-array@v0.0.8-esm/index.mjs";import e from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-typed-array-like@esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/stats-base-range@v0.0.9-esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/error-tools-fmtprodmsg@v0.0.2-esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-floor@esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-abs@esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-max@esm/index.mjs";import d from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-min@esm/index.mjs";import m from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-pow@v0.0.7-esm/index.mjs";import f from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-sqrt@esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@esm/index.mjs";import p from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-plain-object@esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-positive-number@esm/index.mjs";import{isPrimitive as j}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nonnegative-integer@esm/index.mjs";import{isPrimitive as h}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nonnegative-number@esm/index.mjs";import{isPrimitive as b}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-boolean@esm/index.mjs";function v(s,e,r,t,i,d,a,p,l){var j,h,b,v,c,g,w,x,u,y,k,E;for(c=s[t],j=s[r-1]-s[0],v=.999*(w=o(c-s[i],s[d]-c)),b=.001*w,x=0,E=i;E<r;E++)if(a[E]=0,(k=n(s[E]-c))<=v)a[E]=k>b?m(1-m(k/w,3),3):1,p&&(a[E]*=l[E]),x+=a[E];else if(s[E]>c)break;if(h=E-1,x<=0)return e[t];for(E=i;E<=h;E++)a[E]/=x;if(w>0){for(x=0,E=i;E<=h;E++)x+=a[E]*s[E];for(u=c-x,y=0,E=i;E<=h;E++)y+=a[E]*m(s[E]-x,2);if(f(y)>.001*j)for(u/=y,E=i;E<=h;E++)a[E]*=1+u*(s[E]-x)}for(g=0,E=i;E<=h;E++)g+=a[E]*e[E];return g}function c(s,e){return s-e}function g(s,e,r,t,f,a){var p,l,j,h,b,g,w,x,u,y,k,E,A,T,P,q,H,Q,R;if(r<2)return e;for(q=new Array(r),u=new Array(r),P=new Array(r),E=o(d(i(t*r),r),2),g=1;g<=f+1;g++){j=0,p=E-1,w=-1,H=0;do{for(;p<r-1&&!(s[H]-s[j]<=s[p+1]-s[H]);)j+=1,p+=1;if(q[H]=v(s,e,r,H,j,p,u,g>1,P),w<H-1)for(l=s[H]-s[w],Q=w+1;Q<H;Q++)h=(s[Q]-s[w])/l,q[Q]=h*q[H]+(1-h)*q[w];for(x=s[w=H]+a,H=w+1;H<r&&!(s[H]>x);H++)s[H]===s[w]&&(q[H]=q[w],w=H);H=o(w+1,H-1)}while(w<r-1);for(H=0;H<r;H++)u[H]=e[H]-q[H];if(g>f)break;for(H=0;H<r;H++)P[H]=n(u[H]);for(P.sort(c),k=r-(y=i(r/2))-1,T=.999*(b=3*(P[y]+P[k])),A=.001*b,H=0;H<r;H++)R=n(u[H]),P[H]=R<=A?1:R>T?0:m(1-m(R/b,2),2)}return{x:s,y:q}}function w(s,e){return p(e)?a(e,"f")&&(s.f=e.f,!l(s.f))?new TypeError(t("0fk4Q","f",s.f)):a(e,"nsteps")&&(s.nsteps=e.nsteps,!j(s.nsteps))?new TypeError(t("0fk35","nsteps",s.nsteps)):a(e,"delta")&&(s.delta=e.delta,!h(s.delta))?new TypeError(t("0fk4x","delta",s.delta)):a(e,"sorted")&&(s.sorted=e.sorted,!b(s.sorted))?new TypeError(t("0fk30","sorted",s.sorted)):null:new TypeError(t("0fk2h",e))}function x(s,e){return s[0]-e[0]}function u(i,n,o){var d,m,f,a,p,l;if(!e(i)&&!s(i))throw new TypeError(t("0fk8j",i));if(!e(n)&&!s(n))throw new TypeError(t("0fkAa",n));if(l=i.length,n.length!==l)throw new RangeError(t("0fk1H"));if(m={},arguments.length>2&&(f=w(m,o)))throw f;if(!0!==m.sorted){for(a=new Array(l),p=0;p<l;p++)a[p]=[i[p],n[p]];for(a.sort(x),i=new Array(l),n=new Array(l),p=0;p<l;p++)i[p]=a[p][0],n[p]=a[p][1]}return d=void 0===m.nsteps?3:m.nsteps,g(i,n,l,void 0===m.f?2/3:m.f,d,void 0===m.delta?.01*r(l,i,1):m.delta)}export{u as default};
//# sourceMappingURL=index.mjs.map
